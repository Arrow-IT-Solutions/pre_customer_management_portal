<form [formGroup]="dataForm" (ngSubmit)="onSubmit()" class="inline-add-agent">
  <div class="box-shadow mb-3">
    <div class="row">
      <!-- Title -->
      <div class="col-12 side-icon mb-3 d-flex align-items-center">
        <span class="material-symbols-outlined me-2">person_add</span>
        <span>{{ 'Create_Agent' | translate }}</span>
      </div>

      <!-- Arabic Name -->
      <div class="col-md-6 col-12 mb-3">
        <div class="p-float-label" [ngClass]="{'error_border': submitted && form['nameAr'].errors}">
          <input pInputText type="text" formControlName="nameAr" />
          <label [ngClass]="{'error': submitted && form['nameAr'].errors}">
            {{ 'NameAr_Agent' | translate }}
          </label>
        </div>
        <div *ngIf="submitted && form['nameAr'].errors?.['required']" class="text-danger mt-1">
          {{ 'field_required' | translate }}
        </div>
      </div>

      <!-- English Name -->
      <div class="col-md-6 col-12 mb-3">
        <div class="p-float-label" [ngClass]="{'error_border': submitted && form['nameEn'].errors}">
          <input pInputText type="text" formControlName="nameEn" />
          <label [ngClass]="{'error': submitted && form['nameEn'].errors}">
            {{ 'NameEn_Agent' | translate }}
          </label>
        </div>
        <div *ngIf="submitted && form['nameEn'].errors?.['required']" class="text-danger mt-1">
          {{ 'field_required' | translate }}
        </div>
      </div>

      <!-- Phone -->
      <div class="col-md-6 col-12 mb-3">
        <div class="p-float-label" [ngClass]="{'error_border': submitted && form['phone'].errors}">
          <input pInputText type="text" formControlName="phone" />
          <label [ngClass]="{'error': submitted && form['phone'].errors}">
            {{ 'Phone_Agent' | translate }}
          </label>
        </div>
        <div *ngIf="submitted && form['phone'].errors?.['required']" class="text-danger mt-1">
          {{ 'field_required' | translate }}
        </div>
      </div>

      <!-- AnyDesk Address -->
      <div class="col-md-6 col-12 mb-3">
        <div class="p-float-label" [ngClass]="{'error_border': submitted && form['anyDeskAddress'].errors}">
          <input pInputText type="text" formControlName="anyDeskAddress" />
          <label [ngClass]="{'error': submitted && form['anyDeskAddress'].errors}">
            {{ 'AnyDeskAddress' | translate }}
          </label>
        </div>
        <div *ngIf="submitted && form['anyDeskAddress'].errors?.['required']" class="text-danger mt-1">
          {{ 'field_required' | translate }}
        </div>
      </div>

      <!-- Password -->
      <div class="col-md-6 col-12 mb-3">
        <div class="p-float-label password-field">
          <input
            pInputText
            [type]="isPasswordVisible ? 'text' : 'password'"
            formControlName="password"
          />
          <label>{{ 'password_anydesk' | translate }}</label>
          <i
            class="pi"
            [ngClass]="isPasswordVisible ? 'pi-eye' : 'pi-eye-slash'"
            (click)="togglePasswordVisibility()"
          ></i>
        </div>
      </div>

      <!-- Company (auto filled if opened from company page) -->
      <div class="col-md-6 col-12 mb-3" *ngIf="!dataForm.controls['companyIDFK'].value">
        <div class="p-float-label" [ngClass]="{'error_border': submitted && form['companyIDFK'].errors}">
          <p-dropdown
            [options]="companyOptions"
            optionLabel="label"
            optionValue="value"
            formControlName="companyIDFK"
            [filter]="true"
            [showClear]="true"
            filterBy="label"
          ></p-dropdown>
          <label [ngClass]="{'error': submitted && form['companyIDFK'].errors}">
            {{ 'Company_Name' | translate }}
          </label>
        </div>
        <div *ngIf="submitted && form['companyIDFK'].errors?.['required']" class="text-danger mt-1">
          {{ 'field_required' | translate }}
        </div>
      </div>
    </div>
  </div>

  <!-- Actions -->
  <div class="d-flex justify-content-end gap-2">
    <p-button type="submit" class="btn-primary" [loading]="btnLoading">
      {{ 'save' | translate }}
    </p-button>
  </div>
</form>

<p-toast key="toast"></p-toast>
